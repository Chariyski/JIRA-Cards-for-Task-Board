<!DOCTYPE html>
<html>

    <head lang="en">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>JIRA Cards for Task Board</title>

        <!-- 3RD PARTY -->
        <script src="scripts/bundle.js"></script>

        <!-- ELEMENTS -->
        <link rel="import" href="html/elements.html">

        <!-- APP FILES -->
        <link rel="stylesheet" href="styles/main.css"/>
    </head>

    <body unresolved class="fullbleed layout vertical">
        <template is="dom-bind" id="app">
            <paper-drawer-panel id="paper-drawer-panel">
                <!-- Aside /start -->
                <div drawer>
                    <!-- Drawer Toolbar -->
                    <paper-toolbar id="drawerToolbar">
                        <span class="paper-font-title">Menu</span>
                    </paper-toolbar>

                    <!-- Drawer Content -->
                    <paper-menu
                        class="list"
                        attr-for-selected="data-route"
                        selected="{{route}}"
                        on-iron-select="onMenuSelect">

                        <a data-route="home" href="/home">
                            <iron-icon icon="home"></iron-icon>
                            <span>JIRA <span>{{jiraProjectName}}</span></span>
                        </a>

                        <a data-route="design" href="/design">
                            <iron-icon icon="credit-card"></iron-icon>
                            <span>Card design</span>
                        </a>

                        <a data-route="configuration" href="/configuration">
                            <iron-icon icon="settings"></iron-icon>
                            <span>Configuration</span>
                        </a>
                    </paper-menu>

                </div>
                <!-- Aside /end -->

                <!-- Main content /start -->
                <div main>
                    <!-- Main Toolbar -->
                    <paper-toolbar id="mainToolbar">
                        <paper-icon-button id="paperToggle" icon="menu" paper-drawer-toggle></paper-icon-button>
                        <span class="flex"></span>

                        <!-- Application name -->
                        <div class="middle paper-font-headline">JIRA Cards for Task Board</div>

                        <!-- Application sub title -->
                        <div class="bottom title"></div>

                    </paper-toolbar>

                    <iron-pages attr-for-selected="data-route" selected="{{route}}">

                        <section data-route="home">

                            <paper-material id="settings-checkbox-container" class="layout vertical" elevation="1">

                                <paper-dropdown-menu id="jira-sprints-dropdown" label="Choose sprint" placeholder="Choose sprint">
                                    <paper-menu class="dropdown-content" on-click="getSprintIssues">

                                        <template is="dom-repeat" items="{{editedSprints}}">
                                            <paper-item data-route="home" value="{{item.id}}">
                                                <span>{{item.name}}</span>
                                            </paper-item>
                                        </template>

                                    </paper-menu>
                                </paper-dropdown-menu>

                            </paper-material>

                            <scrum-cards
                                id="scrum-cards-container"
                                class="vertical center"
                                jira-issues="{{sprintIssues.issues}}"
                                settings="{{scrumCardSettings}}"></scrum-cards>


                            <iron-ajax
                                id="jira-sprint-issues-ajax"
                                content-type="application/json"
                                handle-as="json"
                                last-response="{{sprintIssues}}"></iron-ajax>

                        </section>

                        <section data-route="design" class="layout vertical">

                            <scrum-cards
                                id="demo-card"
                                class="vertical center"
                                jira-issues="{{demoScrumCard}}"
                                settings="{{scrumCardSettings}}"></scrum-cards>

                            <paper-material id="settings-checkbox-container" class="layout vertical" elevation="1">

                                <div class="layout horizontal">
                                    <div class="layout horizontal wrap flex-2">
                                        <div>
                                            <h3>Type</h3>

                                            <div class="layout horizontal">
                                                <paper-button toggles raised>
                                                    <iron-icon icon="editor:format-italic"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.issueType.isVisible}}">
                                                    <iron-icon icon="icons:visibility"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.issueType.isBold}}">
                                                    <iron-icon icon="editor:format-bold"></iron-icon>
                                                </paper-button>
                                            </div>
                                        </div>

                                        <div>
                                            <h3>Key</h3>

                                            <div class="layout horizontal">
                                                <paper-button toggles raised>
                                                    <iron-icon icon="editor:format-italic"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.issueKey.isVisible}}">
                                                    <iron-icon icon="icons:visibility"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.issueKey.isBold}}">
                                                    <iron-icon icon="editor:format-bold"></iron-icon>
                                                </paper-button>
                                            </div>
                                        </div>

                                        <div>
                                            <h3>Priority</h3>

                                            <div class="layout horizontal">
                                                <paper-button toggles raised>
                                                    <iron-icon icon="editor:format-italic"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.issuePriority.isVisible}}">
                                                    <iron-icon icon="icons:visibility"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.issuePriority.isBold}}">
                                                    <iron-icon icon="editor:format-bold"></iron-icon>
                                                </paper-button>
                                            </div>
                                        </div>

                                        <div>
                                            <h3>Planed for version </h3>

                                            <div class="layout horizontal">
                                                <paper-button toggles raised>
                                                    <iron-icon icon="editor:format-italic"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.issueFixVersions.isVisible}}">
                                                    <iron-icon icon="icons:visibility"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.issueFixVersions.isBold}}">
                                                    <iron-icon icon="editor:format-bold"></iron-icon>
                                                </paper-button>
                                            </div>
                                        </div>

                                        <div>
                                            <h3>Parent issue name</h3>

                                            <div class="layout horizontal">
                                                <paper-button toggles raised>
                                                    <iron-icon icon="editor:format-italic"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.parentName.isVisible}}">
                                                    <iron-icon icon="icons:visibility"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.parentName.isBold}}">
                                                    <iron-icon icon="editor:format-bold"></iron-icon>
                                                </paper-button>
                                            </div>
                                        </div>

                                        <div>
                                            <h3>Parent key</h3>

                                            <div class="layout horizontal">
                                                <paper-button toggles raised>
                                                    <iron-icon icon="editor:format-italic"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.parentKey.isVisible}}">
                                                    <iron-icon icon="icons:visibility"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.parentKey.isBold}}">
                                                    <iron-icon icon="editor:format-bold"></iron-icon>
                                                </paper-button>
                                            </div>
                                        </div>

                                        <div>
                                            <h3>Summary</h3>

                                            <div class="layout horizontal">
                                                <paper-button toggles raised>
                                                    <iron-icon icon="editor:format-italic"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles

                                                    raised
                                                    active="{{scrumCardSettings.issueSummary.isVisible}}">
                                                    <iron-icon icon="icons:visibility"></iron-icon>
                                                </paper-button>
                                                <paper-button toggles raised
                                                              active="{{scrumCardSettings.issueSummary.isBold}}">
                                                    <iron-icon icon="editor:format-bold"></iron-icon>
                                                </paper-button>
                                            </div>
                                        </div>

                                        <div>
                                            <h3>Description</h3>

                                            <div class="layout horizontal">
                                                <paper-button toggles raised>
                                                    <iron-icon icon="editor:format-italic"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.issueDescription.isVisible}}">
                                                    <iron-icon icon="icons:visibility"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.issueDescription.isBold}}">
                                                    <iron-icon icon="editor:format-bold"></iron-icon>
                                                </paper-button>
                                            </div>
                                        </div>

                                        <div>
                                            <h3>Assignee</h3>

                                            <div class="layout horizontal">
                                                <paper-button toggles raised>
                                                    <iron-icon icon="editor:format-italic"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.issueAssignee.isVisible}}">
                                                    <iron-icon icon="icons:visibility"></iron-icon>
                                                </paper-button>
                                                <paper-button
                                                    toggles
                                                    raised
                                                    active="{{scrumCardSettings.issueAssignee.isBold}}">
                                                    <iron-icon icon="editor:format-bold"></iron-icon>
                                                </paper-button>
                                            </div>
                                        </div>

                                    </div>

                                    <div class="layout vertical flex-1">
                                        <h3>Font size: <span>{{scrumCardSettings.fontSize}}</span></h3>

                                        <div class="layout horizontal">
                                            <span>20</span>
                                            <paper-slider
                                                min="20"
                                                max="32"
                                                value="{{scrumCardSettings.fontSize}}"></paper-slider>
                                            <span>32</span>
                                        </div>
                                    </div>

                                </div>

                                <div>
                                    <paper-button
                                        raised
                                        on-click="saveUserConfiguration">Save card design
                                    </paper-button>
                                </div>
                            </paper-material>

                        </section>

                        <section data-route="configuration">
                            <!-- TODO remove inline style -->
                            <paper-material class="layout vertical" elevation="1" style="width:300px; margin-left: 0">
                                <h2>Configurations</h2>

                                <paper-input
                                    id="jira-url-address"
                                    class="flex-1"
                                    label="JIRA Base URL Address"
                                    auto-validate
                                    pattern="^(http(s?)\:\/\/|~\/|\/)?([\w]+:\w+@)?([a-zA-Z]{1}([\w\-]+\.)+([\w]{2,5}))(:[\d]{1,5})?"
                                    error-message="Invalid input! Example URL: https://example.com"
                                    value="{{jiraURL}}"></paper-input>

                                <paper-checkbox
                                    id="jira-green-hopper"
                                    checked="{{isAJAXtoGreenHopper}}"
                                    value="{{isAJAXtoGreenHopper}}">use JIRA Agile
                                </paper-checkbox>

                                <hr/>

                                <paper-dropdown-menu id="dropdown-for-jira-projects"  label="Choose project" placeholder="Choose project">
                                    <paper-menu class="dropdown-content" selected="0">
                                        <template is="dom-repeat" items="{{editedProjects}}">
                                            <paper-item label="{{item.name}}" value="{{item.value}}">{{item.name}}</paper-item>
                                        </template>
                                    </paper-menu>
                                </paper-dropdown-menu>

                                <paper-button raised on-click="saveUserConfiguration">Save options</paper-button>

                            </paper-material>
                        </section>
                    </iron-pages>
                </div>
                <!-- Main content /end -->
            </paper-drawer-panel>

            <paper-toast id="custom-message" style="z-index: 999999999"></paper-toast>

            <!-- AJAX for projects-->
            <iron-ajax
                id="jira-projects-ajax"
                content-type="application/json"
                handle-as="json"
                on-response="_responseHandlerForProjectsAJAX"
                last-response="{{projects}}"></iron-ajax>

            <!-- AJAX for sprints-->
            <iron-ajax
                id="jira-project-sprints-ajax"
                content-type="application/json"
                handle-as="json"
                on-error="_errorHandlerForSprintsAJAX"
                on-response="_responseHandlerForSprintsAJAX"
                last-response="{{sprints}}"></iron-ajax>

        </template>

        <!-- build:js scripts/app.js -->
        <script src="scripts/main.js"></script>
        <script src="scripts/third-party/analytics.js"></script>
        <!-- endbuild-->
    </body>

</html>
