<!DOCTYPE html>
<html>

    <head lang="en">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>JIRA Cards for Task Board</title>

        <!-- 3RD PARTY -->
        <script src="scripts/bundle.js"></script>

        <!-- ELEMENTS -->
        <link rel="import" href="html/elements.html">

        <!-- APP FILES -->
        <link rel="stylesheet" href="styles/main.css"/>
    </head>

    <body unresolved class="fullbleed layout vertical">
        <template is="dom-bind" id="app">
            <paper-drawer-panel id="paperDrawerPanel">
                <!-- Aside /start -->
                <div drawer>
                    <!-- Drawer Toolbar -->
                    <paper-toolbar id="drawerToolbar">
                        <span class="paper-font-title">Menu</span>
                    </paper-toolbar>

                    <!-- Drawer Content -->
                    <paper-menu
                        class="list"
                        attr-for-selected="data-route"
                        selected="{{route}}"
                        on-iron-select="onMenuSelect">

                        <a data-route="home" href="/index.html">
                            <iron-icon icon="home"></iron-icon>
                            <span>Home</span>
                        </a>

                        <a data-route="setting" href="/settings">
                            <iron-icon icon="settings"></iron-icon>
                            <span>Settings</span>
                        </a>
                    </paper-menu>
                </div>
                <!-- Aside /end -->

                <!-- Main content /start -->
                <div main>
                    <!-- Main Toolbar -->
                    <paper-toolbar id="mainToolbar">
                        <paper-icon-button id="paperToggle" icon="menu" paper-drawer-toggle></paper-icon-button>
                        <span class="flex"></span>

                        <!-- Application name -->
                        <div class="middle paper-font-headline">JIRA Cards for Task Board</div>

                        <!-- Application sub title -->
                        <div class="bottom title"></div>

                    </paper-toolbar>

                    <iron-pages attr-for-selected="data-route" selected="{{route}}">

                        <section data-route="home">
                            <paper-material
                                class="vertical layout hide-from-print"
                                elevation="1">

                                <div class="horizontal layout flex-2">

                                    <div class="flex-2">
                                        <paper-input
                                            id="JIRA-URL-address"
                                            class="flex-1 padding-right"
                                            label="JIRA URL address"
                                            auto-validate
                                            pattern="(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})"
                                            error-message="Invalid input! Example URL: https://example.com"
                                            value="{{ajaxSettings.jiraURL}}"></paper-input>
                                    </div>

                                    <div class="layout flex-1 align-element-to-paper-material">
                                        <paper-checkbox
                                            id="jira-green-hopper"
                                            class="flex-1"
                                            checked="{{ajaxSettings.isAJAXtoGreenHopper}}"
                                            value="{{ajaxSettings.isAJAXtoGreenHopper}}"
                                            on-click="toggleJIRAAgileUsage">use JIRA Agile
                                        </paper-checkbox>
                                    </div>

                                    <div class="layout flex-1 align-element-to-paper-material">
                                        <paper-button
                                            id="button-for-ajax-to-jira"
                                            class="flex-1"
                                            raised
                                            on-click="getJIRAIssues">Get issues
                                        </paper-button>

                                        <paper-spinner id="ajax-spinner" alt="Loading issues"></paper-spinner>
                                    </div>
                                </div>

                                <div class="horizontal layout flex-5">
                                    <jira-fix-version-helper
                                        id="jira-fix-version"
                                        class="flex-1"
                                        check-url-validity="{{getJIRAURLAddressInvalidProperty}}"
                                        jira-url-address="{{ajaxSettings.jiraURL}}"></jira-fix-version-helper>

                                    <jira-agile-helper
                                        id="jira-agile"
                                        class="flex-1"
                                        check-url-validity="{{getJIRAURLAddressInvalidProperty}}"
                                        style="display: none;"
                                        jira-url-address="{{ajaxSettings.jiraURL}}"></jira-agile-helper>

                                    <div class="flex-1"></div>
                                </div>

                                <!-- AJAX for JIRA Issues-->
                                <iron-ajax
                                    id="ajax-for-issues"
                                    content-type="application/json"
                                    handle-as="json"
                                    last-response="{{ajax}}"
                                    on-request="onJIRAIssuesRequest"
                                    on-response="onJIRAIssuesResponse"
                                    on-error="test"></iron-ajax>
                            </paper-material>

                            <scrum-cards
                                id="scrum-cards-container"
                                class="vertical center"
                                jira-issues="{{ajax.issues}}"
                                settings="{{scrumCardSettings}}"></scrum-cards>
                        </section>

                        <section data-route="settings" class="layout vertical">
                            <paper-material class="layout horizontal center" elevation="1">
                                <div class="layout flex-1 align-element-to-paper-material">
                                    <paper-button class="flex-1"
                                                  raised
                                                  on-click="saveUserOptions">Save options
                                    </paper-button>
                                </div>
                            </paper-material>

                            <!--  Row with settings /start-->
                            <div id="settings-checkbox-container" class="layout horizontal settings-checkbox-container">
                                <paper-material class="layout horizontal flex-1" elevation="1">
                                    <div class="layout vertical flex-1 strech">

                                        <div class="layout horizontal">
                                            <paper-input class="flex-1 padding-right"
                                                         label="JIRA URL address"
                                                         auto-validate
                                                         pattern="(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})"
                                                         error-message="Invalid input! Example URL: https://example.com"
                                                         value="{{ajaxSettings.jiraURL}}"></paper-input>

                                            <div class="layout flex-1 align-element-to-paper-material">
                                                <paper-checkbox
                                                    class="flex-1"
                                                    checked="{{ajaxSettings.isAJAXtoGreenHopper}}"
                                                    value="{{ajaxSettings.isAJAXtoGreenHopper}}">use JIRA Agile
                                                </paper-checkbox>
                                            </div>
                                        </div>

                                        <h3>Choose template</h3>
                                        <select>
                                            <option value="">Default</option>
                                        </select>

                                        <h3>Cards font size</h3>
                                        <paper-slider
                                            class="flex-1"
                                            min="20"
                                            max="32"
                                            value="{{scrumCardSettings.fontSize}}"></paper-slider>
                                    </div>
                                </paper-material>

                                <paper-material class="layout horizontal flex-1" elevation="1">
                                    <div class="layout vertical flex-1">
                                        <h3>Please choose which parts of the scrum card will be bold</h3>

                                        <div class="layout horizontal">
                                            <div class="layout vertical">
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.issueType.isBold}}"
                                                    value="{{scrumCardSettings.issueType.isBold}}">type
                                                </paper-checkbox>
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.issueKey.isBold}}"
                                                    value="{{scrumCardSettings.issueKey.isBold}}">key
                                                </paper-checkbox>
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.issuePriority.isBold}}"
                                                    value="{{scrumCardSettings.issuePriority.isBold}}">priority
                                                </paper-checkbox>
                                            </div>
                                            <div class="layout vertical">
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.issueFixVersions.isBold}}"
                                                    value="{{scrumCardSettings.issueFixVersions.isBold}}">planed for
                                                    version
                                                </paper-checkbox>
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.parentName.isBold}}"
                                                    value="{{scrumCardSettings.parentName.isBold}}">parent issue name
                                                </paper-checkbox>
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.parentKey.isBold}}"
                                                    value="{{scrumCardSettings.parentKey.isBold}}">parent key
                                                </paper-checkbox>
                                            </div>
                                            <div class="layout vertical">
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.issueSummary.isBold}}"
                                                    value="{{scrumCardSettings.issueSummary.isBold}}">summary
                                                </paper-checkbox>
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.issueDescription.isBold}}"
                                                    value="{{scrumCardSettings.issueDescription.isBold}}">description
                                                </paper-checkbox>
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.issueAssignee.isBold}}"
                                                    value="{{scrumCardSettings.issueAssignee.isBold}}">assignee
                                                </paper-checkbox>
                                            </div>
                                        </div>
                                    </div>
                                </paper-material>

                                <paper-material class="layout horizontal flex-1" elevation="1">
                                    <div class="layout vertical flex-1">
                                        <h3>Please choose which parts of the scrum card will be visible</h3>

                                        <div class="layout horizontal">
                                            <div class="layout vertical">
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.issueType.isVisible}}"
                                                    value="{{scrumCardSettings.issueType.isVisible}}">type
                                                </paper-checkbox>
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.issueKey.isVisible}}"
                                                    value="{{scrumCardSettings.issueKey.isVisible}}">key
                                                </paper-checkbox>
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.issuePriority.isVisible}}"
                                                    value="{{scrumCardSettings.issuePriority.isVisible}}">priority
                                                </paper-checkbox>
                                            </div>
                                            <div class="layout vertical">
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.issueFixVersions.isVisible}}"
                                                    value="{{scrumCardSettings.issueFixVersions.isVisible}}">planed
                                                    for
                                                    version
                                                </paper-checkbox>
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.parentName.isVisible}}"
                                                    value="{{scrumCardSettings.parentName.isVisible}}">parent issue
                                                    name
                                                </paper-checkbox>
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.parentKey.isVisible}}"
                                                    value="{{scrumCardSettings.parentKey.isVisible}}">parent key
                                                </paper-checkbox>
                                            </div>
                                            <div class="layout vertical">
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.issueSummary.isVisible}}"
                                                    value="{{scrumCardSettings.issueSummary.isVisible}}">summary
                                                </paper-checkbox>
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.issueDescription.isVisible}}"
                                                    value="{{scrumCardSettings.issueDescription.isVisible}}">
                                                    description
                                                </paper-checkbox>
                                                <paper-checkbox
                                                    checked="{{scrumCardSettings.issueAssignee.isVisible}}"
                                                    value="{{scrumCardSettings.issueAssignee.isVisible}}">assignee
                                                </paper-checkbox>
                                            </div>
                                        </div>
                                    </div>
                                </paper-material>
                            </div>
                            <!--  Row with settings /end-->

                            <scrum-cards
                                id="demo-card"
                                class="vertical center"
                                jira-issues="{{demoScrumCard}}"
                                settings="{{scrumCardSettings}}"></scrum-cards>
                        </section>

                    </iron-pages>
                </div>
                <!-- Main content /end -->
            </paper-drawer-panel>

            <paper-toast id="options-saved" duration="6000" text="All user options ware saved"></paper-toast>
            <paper-toast id="options-loaded" duration="6000" text="All user options ware loaded"></paper-toast>
            <!-- TODO add function for showing messages -->
        </template>

        <!-- build:js scripts/app.js -->
        <script src="scripts/main.js"></script>
        <script src="scripts/third-party/analytics.js"></script>
        <!-- endbuild-->
    </body>

</html>
