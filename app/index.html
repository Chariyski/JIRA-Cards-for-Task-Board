<!DOCTYPE html>
<html>

    <head lang="en">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>JIRA Cards for Task Board</title>

        <!-- 3RD PARTY -->
        <script src="scripts/bundle.js"></script>

        <!-- APP FILES -->

        <!-- ELEMENTS -->
        <link rel="import" href="html/elements.html">

        <style>
            #print {
                display: none;
            }

            @media print {
                body > * {
                    display: none;
                }

                #print {
                    display: block;
                }
            }
        </style>
    </head>

    <body unresolved class="fullbleed layout vertical">
        <template is="dom-bind" id="app">
            <paper-drawer-panel id="paperDrawerPanel">
                <div drawer>
                    <!-- Drawer Toolbar -->
                    <paper-toolbar id="drawerToolbar">
                        <span class="paper-font-title">Menu</span>
                    </paper-toolbar>

                    <!-- Drawer Content -->
                    <paper-menu class="list" attr-for-selected="data-route" selected="{{route}}"
                                on-iron-select="onMenuSelect">
                        <a data-route="home" href="/index.html">
                            <iron-icon icon="home"></iron-icon>
                            <span>Home</span>
                        </a>

                        <a data-route="users" href="/users">
                            <iron-icon icon="info"></iron-icon>
                            <span>Users</span>
                        </a>

                        <a data-route="contact" href="/contact">
                            <iron-icon icon="mail"></iron-icon>
                            <span>Contact</span>
                        </a>
                    </paper-menu>
                </div>
                <paper-header-panel main mode="waterfall-tall">

                    <!-- Main Toolbar -->
                    <paper-toolbar id="mainToolbar">
                        <paper-icon-button id="paperToggle" icon="menu" paper-drawer-toggle></paper-icon-button>
                        <span class="flex"></span>

                        <!-- Toolbar icons -->
                        <paper-icon-button icon="refresh"></paper-icon-button>
                        <paper-icon-button icon="search"></paper-icon-button>

                        <!-- Application name -->
                        <div class="middle paper-font-display2 app-name">JIRA Cards for Task Board</div>

                        <!-- Application sub title -->
                        <div class="bottom title"></div>

                    </paper-toolbar>

                    <!-- Main Content -->
                    <div class="content">
                        <iron-pages attr-for-selected="data-route" selected="{{route}}">

                            <section data-route="home">
                                <paper-material class="horizontal layout around-justified end" elevation="1">
                                    <paper-input
                                        id="JIRA-URL-address"
                                        label="JIRA URL address"
                                        value="{{URLAddress}}"></paper-input>
                                    <!--pattern="(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})"-->

                                    <paper-input
                                        id="JIRA-project"
                                        label="JIRA Project"
                                        value="{{project}}">>
                                    </paper-input>
                                    <paper-input
                                        id="JIRA-project-version"
                                        label="Project version"
                                        value="{{projectVersion}}">>
                                    </paper-input>

                                    <paper-button on-click="getJIRAIssues">Get issues</paper-button>
                                    <paper-spinner id="ajax-spinner" alt="Loading issues"></paper-spinner>

                                    <iron-ajax
                                        id="ajax-for-issues"
                                        content-type="application/json"
                                        handle-as="json"
                                        last-response="{{ajax}}"
                                        on-request="onJIRAIssuesRequest"
                                        on-response="onJIRAIssuesResponse"></iron-ajax>
                                </paper-material>

                                <scrum-cards
                                    id="scrum-cards-container"
                                    class="vertical center"
                                    jira-issues="{{ajax.issues}}"
                                    settings="{{scrumCardSettings}}"></scrum-cards>
                            </section>

                            <section data-route="users">
                                <paper-material elevation="1">
                                    <h2 class="paper-font-display2">Users</h2>

                                    <p>This is the users section</p>
                                    <a href="/users/Rob">Rob</a>
                                </paper-material>
                            </section>

                            <section data-route="user-info">
                                <paper-material elevation="1">
                                    <h2 class="paper-font-display2">
                                        User:<span>{{params.name}}</span>
                                    </h2>

                                    <div>This is <span>{{params.name}}</span>'s section</div>
                                </paper-material>
                            </section>

                            <section data-route="contact">
                                <paper-material elevation="1">
                                    <paper-input value="{{URLAddress}}"></paper-input>
                                    <paper-input value="{{project}}"></paper-input>
                                    <paper-input value="{{projectVersion}}"></paper-input>
                                </paper-material>
                                <paper-material elevation="1">
                                    <p>Please choose which parts of the scrum card will be bold</p>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.issueType.isBold}}"
                                        value="{{scrumCardSettings.issueType.isBold}}">issueType.isBold
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.issueKey.isBold}}"
                                        value="{{scrumCardSettings.issueKey.isBold}}">issueKey.isBold
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.parentName.isBold}}"
                                        value="{{scrumCardSettings.parentName.isBold}}">parentName.isBold
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.parentKey.isBold}}"
                                        value="{{scrumCardSettings.parentKey.isBold}}">parentKey.isBold
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.issuePriority.isBold}}"
                                        value="{{scrumCardSettings.issuePriority.isBold}}">issuePriority.isBold
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.issueFixVersions.isBold}}"
                                        value="{{scrumCardSettings.issueFixVersions.isBold}}">issueFixVersions.isBold
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.issueSummary.isBold}}"
                                        value="{{scrumCardSettings.issueSummary.isBold}}">issueSummary.isBold
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.issueDescription.isBold}}"
                                        value="{{scrumCardSettings.issueDescription.isBold}}">issueDescription.isBold
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.issueAssignee.isBold}}"
                                        value="{{scrumCardSettings.issueAssignee.isBold}}">issueAssignee.isBold
                                    </paper-checkbox>
                                </paper-material>
                                <paper-material elevation="1">
                                    <p>Please choose which parts of the scrum card will be visible</p>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.issueType.isVisible}}"
                                        value="{{scrumCardSettings.issueType.isVisible}}">issueType.isVisible
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.issueKey.isVisible}}"
                                        value="{{scrumCardSettings.issueKey.isVisible}}">issueKey.isVisible
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.parentName.isVisible}}"
                                        value="{{scrumCardSettings.parentName.isVisible}}">parentName.isVisible
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.parentKey.isVisible}}"
                                        value="{{scrumCardSettings.parentKey.isVisible}}">parentKey.isVisible
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.issuePriority.isVisible}}"
                                        value="{{scrumCardSettings.issuePriority.isVisible}}">issuePriority.isVisible
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.issueFixVersions.isVisible}}"
                                        value="{{scrumCardSettings.issueFixVersions.isVisible}}">
                                        issueFixVersions.isVisible
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.issueSummary.isVisible}}"
                                        value="{{scrumCardSettings.issueSummary.isVisible}}">issueSummary.isVisible
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.issueDescription.isVisible}}"
                                        value="{{scrumCardSettings.issueDescription.isVisible}}">
                                        issueDescription.isVisible
                                    </paper-checkbox>
                                    <paper-checkbox
                                        checked="{{scrumCardSettings.issueAssignee.isVisible}}"
                                        value="{{scrumCardSettings.issueAssignee.isVisible}}">issueAssignee.isVisible
                                    </paper-checkbox>
                                </paper-material>
                                <paper-button id="save-options" on-click="saveUserOptions">Save options</paper-button>
                            </section>
                        </iron-pages>
                    </div>
                </paper-header-panel>
            </paper-drawer-panel>

            <paper-toast id="options-saved" duration="6000" text="All the options ware saved"></paper-toast>
            <paper-toast id="options-loaded" duration="6000" text="All user options ware loaded"></paper-toast>
            <!-- TODO add function for message showing-->
            <!-- The duplication of this element is needed for print preview work around -->
            <scrum-cards
                id="print"
                class="vertical center"
                jira-issues="{{ajax.issues}}"
                settings="{{scrumCardSettings}}"></scrum-cards>
        </template>

        <!-- build:js scripts/app.js -->
        <script src="scripts/main.js"></script>
        <script src="scripts/third-party/analytics.js"></script>
        <!-- endbuild-->
    </body>

</html>
